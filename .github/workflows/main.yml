on:
    release:
    workflow_dispatch:
jobs:
    release:
        runs-on: ubuntu-latest
        permissions: write-all
        steps:
        -   uses: actions/checkout@v2
        -   name: Compile and release
            uses: rust-build/rust-build.action@v1.4.5
            id: compile
            env:
                GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
            with:
                RUSTTARGET: "wasm32-wasi"
                UPLOAD_MODE: none
        -   name: Upload artifact
            uses: actions/upload-artifact@v3
            with:
                name: Binary
                path: |
                    ${{ steps.compile.outputs.BUILT_ARCHIVE }}
                    ${{ steps.compile.outputs.BUILT_CHECKSUM }}